---
import { assets } from "../config/assets";

const currentPath: string = Astro.url.pathname;

type NavItem = {
  href: string;
  label: string;
  subLabel?: string;
};

const navItems: NavItem[] = [
  { href: "/", label: "Inicio" },
  { href: "/desarrollos", label: "Desarrollos" },
  { href: "/construccion", label: "ConstrucciÃ³n", subLabel: "a la medida" },
  { href: "/inversion", label: "Invierte con", subLabel: "Nosotros" },
  { href: "/aboutUS", label: "Acerca de", subLabel: "KO729" },
  { href: "/contacto", label: "Contacto" }
];

const isActive = (href: string): boolean => {
  if (href === "/") return currentPath === "/";
  return currentPath.startsWith(href);
};
---

<header class="site-header">
  <div class="logo_container">
    <a href="/" class="logo_header">
      <img src={assets.logos.main} alt="logo" />
    </a>
  </div>

  <div class="nav_bar">
    {
      navItems.map((item) => (
        <div class="nav_container">
          <a href={item.href} class={isActive(item.href) ? "nav_active" : ""}>
            {item.label}
            {item.subLabel ? <><br />{item.subLabel}</> : null}
          </a>
        </div>
      ))
    }
  </div>

  <div class="nav_bar_responsive" id="menuResponsive">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="w-6 h-6 menu_bars"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" />
    </svg>
  </div>
</header>

<nav id="sideNavBar">
  <div class="close_bar_responsive_container">
    <div class="close_nav_bar" id="closeNavBar">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-6 h-6 menu_close"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
      </svg>
    </div>
  </div>

  <div class="nav_bar_container">
    {
      navItems.map((item) => (
        <div class="nav_container_responsive">
          <a
            href={item.href}
            class={`nav_element ${isActive(item.href) ? "nav_active" : ""}`}
          >
            {item.label}
            {item.subLabel ? <><br />{item.subLabel}</> : null}
          </a>
        </div>
      ))
    }
  </div>
</nav>
